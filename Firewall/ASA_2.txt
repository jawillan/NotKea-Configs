# Basic ASA settings 

enable password democracy
clock set 15:26:00 March 9 2021
hostname NOTKEA-MAD-ASA2
domain-name notkea.local
username student password cisco


# Interfaces -- naming the interface sets security-level to 0!! Make sure to nameif BEFORE security-level

int g0/0
nameif outside-internet
ip address dhcp
no shutdown
security-level 0

int g0/1
nameif NOTKEA_MAD_CORE1
ip address 10.7.240.70 255.255.255.252
no shut
security-level 100

int g0/2
nameif NOTKEA_MAD_CORE2
ip add 10.7.240.78 255.255.255.252
no shut
security-level 100

exit


# Route pointing to Madison College Router - just guessing that college router ip is .254

route outside-internet 0.0.0.0 0.0.0.0 172.19.16.254


# Route pointing to our Pod network

route NOTKEA_MAD_CORE2 10.0.0.0 255.248.0.0 10.7.240.77


# Configure NAT (PAT, technically) from inside to outside
# inside/outside are user defined names for interfaces, this may need to be a zone based firewall that incorporates both core switch connections

object network INSIDE-TO-NET
subnet 10.0.0.0 255.255.255.0
nat (NOTKEA_MAD_CORE2,outside-internet) dynamic interface


# create policy map to allow icmp -- check firewall documentation on this, it's finicky

policy-map global_policy
class inpection_default
inspect icmp
exit
exit


# Optional -- Allow your ASA to appear as the first hop for inside hosts going out
class class_default
set connection decrement-ttl


# configure ssh access and http access

aaa authentication http console LOCAL
aaa authentication ssh console LOCAL
crypto key generate rsa modulus 1024


# ip and subnet of host, name of nearest ASA interface

ssh 10.0.0.0 255.255.255.0 NOTKEA_MAD_CORE2


# Enable ASA http interface -- x and y are the ip and subnet of the management host machine, followed by the name of the nearest ASA interface

http server enable
http 10.0.35.0 255.255.255.0 NOTKEA_MAD_CORE2


# ACL allowing certain traffic types in -- don't paste these in!! this section is WIP, never done ACLs on ASA CLI before.Your mileage may vary.
#access-list outside-in extended permit icmp any any time-exceeded
#access-list outside-in extended permit icmp any any unreachable
#access-list outside-in extended permit icmp any any traceroute



show running-config --------------------------------------------------------
ASA2# show running
: Saved

:
: Serial Number: FCH18207J04
: Hardware:   ASA5512, 4096 MB RAM, CPU Clarkdale 2793 MHz, 1 CPU (2 cores)
:
ASA Version 9.9(1)
!
hostname ASA2
enable password $sha512$5000$7n9gbFQzSm+TXamFjn9GOA==$WyRbYt5vUCgAWXlJxcx3WA== pbkdf2
names

!
interface GigabitEthernet0/0
 nameif Internet
 security-level 0
 ip address dhcp setroute
!
interface GigabitEthernet0/1
 nameif G1-Core1
 security-level 50
 ip address 10.7.240.70 255.255.255.252
!
interface GigabitEthernet0/2
 nameif G2-Core2
 security-level 50
 ip address 10.7.240.78 255.255.255.252
!
interface GigabitEthernet0/3
 shutdown
 no nameif
 no security-level
 no ip address
!
interface GigabitEthernet0/4
 shutdown
 no nameif
 no security-level
 no ip address
!
interface GigabitEthernet0/5
 shutdown
 no nameif
 no security-level
 no ip address
!
interface Management0/0
 management-only
 shutdown
 no nameif
 no security-level
 no ip address
!
ftp mode passive
object network Pod1Net
 subnet 10.0.0.0 255.248.0.0
object-group protocol DM_INLINE_PROTOCOL_1
 protocol-object ip
 protocol-object icmp
 protocol-object udp
 protocol-object tcp
object-group protocol DM_INLINE_PROTOCOL_2
 protocol-object ip
 protocol-object icmp
 protocol-object udp
 protocol-object tcp
object-group protocol DM_INLINE_PROTOCOL_3
 protocol-object ip
 protocol-object icmp
 protocol-object udp
 protocol-object tcp
no pager
mtu Internet 1500
mtu G1-Core1 1500
mtu G2-Core2 1500
no failover
no monitor-interface service-module
icmp unreachable rate-limit 1 burst-size 1
no asdm history enable
arp timeout 14400
no arp permit-nonconnected
arp rate-limit 8192
!
object network Pod1Net
 nat (any,Internet) dynamic interface
route G2-Core2 10.0.0.0 255.248.0.0 10.7.240.77 1
timeout xlate 3:00:00
timeout pat-xlate 0:00:30
timeout conn 1:00:00 half-closed 0:10:00 udp 0:02:00 sctp 0:02:00 icmp 0:00:02
timeout sunrpc 0:10:00 h323 0:05:00 h225 1:00:00 mgcp 0:05:00 mgcp-pat 0:05:00
timeout sip 0:30:00 sip_media 0:02:00 sip-invite 0:03:00 sip-disconnect 0:02:00
timeout sip-provisional-media 0:02:00 uauth 0:05:00 absolute
timeout tcp-proxy-reassembly 0:01:00
timeout floating-conn 0:00:00
timeout conn-holddown 0:00:15
timeout igp stale-route 0:01:10
user-identity default-domain LOCAL
aaa authentication ssh console LOCAL
aaa authentication http console LOCAL
aaa authentication login-history
http server enable
http 10.0.35.0 255.255.255.0 G2-Core2
http 10.0.8.0 255.255.255.0 G2-Core2
no snmp-server location
no snmp-server contact
crypto ipsec security-association pmtu-aging infinite
crypto ca trustpool policy
telnet timeout 5
ssh stricthostkeycheck
ssh 10.0.35.0 255.255.255.0 G2-Core2
ssh 10.0.8.0 255.255.255.0 G2-Core2
ssh timeout 5
ssh key-exchange group dh-group1-sha1
console timeout 0
dhcp-client client-id interface Internet
threat-detection basic-threat
threat-detection statistics access-list
no threat-detection statistics tcp-intercept
dynamic-access-policy-record DfltAccessPolicy
username student password $sha512$5000$wolIrFAQ8HHax6QbHw2CnA==$/YZ5OWl5/0Tb9vDrsdviTg== pbkdf2 privilege 15
!
class-map inspection_default
 match default-inspection-traffic
!
!
policy-map type inspect dns preset_dns_map
 parameters
  message-length maximum client auto
  message-length maximum 512
  no tcp-inspection
policy-map global_policy
 class inspection_default
  inspect dns preset_dns_map
  inspect ftp
  inspect h323 h225
  inspect h323 ras
  inspect ip-options
  inspect netbios
  inspect rsh
  inspect rtsp
  inspect skinny
  inspect esmtp
  inspect sqlnet
  inspect sunrpc
  inspect tftp
  inspect sip
  inspect xdmcp
!
service-policy global_policy global
prompt hostname context
!
jumbo-frame reservation
!
call-home reporting anonymous prompt 2
call-home
 profile CiscoTAC-1
  no active
  destination address http https://tools.cisco.com/its/service/oddce/services/DDCEService
  destination address email callhome@cisco.com
  destination transport-method http
  subscribe-to-alert-group diagnostic
  subscribe-to-alert-group environment
  subscribe-to-alert-group inventory periodic monthly
  subscribe-to-alert-group configuration periodic monthly
  subscribe-to-alert-group telemetry periodic daily
Cryptochecksum:864859ad90fa01ea1b851cc17d879bf3
: end
ASA2# configure terminal
ASA2(config)# pager lines 24
ASA2(config)# exit
